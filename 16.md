# NIP-16

`draft` `optional` `author:Semisol`

## Event Treatment

Relays may decide to allow replaceable and/or ephemeral events.

### Regular Events

A _regular event_ is defined as a `kind:n` event with `1000 <= n < 10000`.
Upon a regular event being received, the relay **SHOULD** send it to all clients with a matching filter, and it **SHOULD** store it.
New events of the same kind do not affect previous events in any way.

### Replaceable Events

A _replaceable event_ is defined as a `kind:n` event with `10000 <= n < 20000`.
Upon a replaceable event with a newer timestamp than the currently known latest replaceable event with the same kind and author being received, the old event **SHOULD** be discarded, effectively replacing what gets returned when querying for `author:kind` tuples.

### Ephemeral Events

An _ephemeral event_ is defined as a `kind:n` event with `20000 <= n < 30000`.
Upon an ephemeral event being received, the relay **SHOULD** send it to all clients with a matching filter, and **MUST NOT** store it.

## Client Behavior

Clients **SHOULD** use the `supported_nips` field to learn if a relay supports this NIP.
Clients **SHOULD NOT** send ephemeral events to relays that do not support this NIP; they will most likely be persisted.
Clients **MAY** send replaceable events to relays that may not support this NIP, and clients querying **SHOULD** be prepared for the relay to send multiple events and should use the latest one.

## Suggested Use Cases

- **States:** An application may create a state event that is replaced every time a new state is set (such as statuses)
- **Typing indicators:** A chat application may use ephemeral events as a typing indicator.
- **Messaging:** Two pubkeys can message over nostr using ephemeral events.
